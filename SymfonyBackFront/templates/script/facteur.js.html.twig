<script>
    const btn = document.getElementById("facteur_submit");
    const inputs = document.querySelectorAll("input");

    const mailRegex =
    /^(([^<>()[]\.,;:\s@"]+(.[^<>()[]\.,;:\s@"]+))|(".+"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))$/;
    const numberRegex = /^[0-9]$/;
    const nameRegex = /^[a-zA-Z0-9\s,.'-+éàèù]{0,}$/;

    btn.addEventListener("click", () => {
    btn.preventDefault();
    const email = inputs[0].value;
    const nom = inputs[1].value;
    const password = inputs[2].value;

    if (
        mailRegex.test(email) &&
        numberRegex.test(password) &&
        password.length === 4 &&
        nameRegex.test(nom)
    ) {
        fetch("https://step-post-nodejs.herokuapp.com/api/facteur/new-facteur", {method: 'POST', body: {
        email,
        nom,
        password,
        }}).then((response) =>
        response.json().then((result) => {
            if (result) {
            alert("Facteur créé");
            } else {
            alert("Problème serveur");
            }
        })
        );
    }
    });
</script>